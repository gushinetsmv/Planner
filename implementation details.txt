I have implemented three different algorithms to calculate working hours "on the fly" none of which gave me desired performance of 3 seconds. Then i decided to prepare data for further reports, so application will only have to calculate work hours of first and last day "on the fly" and other days` work hours will be taken from special table "report". So I created and filled in this table with working hours for every employee`s every day of work. After that, I created trigger function on table "schedule" to keep "report" table up to date. Trigger updates "report" table on any insert/update or delete occurred at "schedule" table. Although In real business systems triggers are not used frequently because of hidden system behavior, I decided to use them because of simplicity and easy integration. 